\begin{ingrid}

continuedataset:

/PepsiCo datadownloadsareRestricted
/Cookie varies_on

/long_name (ELR Seasonal Temperature Forecast) def
/description (ELR NMME Seasonal forecasts for probabilities of below-normal, above-normal, and near-normal temperature) def

datasetdefs:

/togetherfn {
 a:
    C /Below_Normal VALUE
    :a:
     C /Normal VALUE
     masklt
    :a:
     C /Above_Normal VALUE
     masklt
    -1 mul
    0 replaceNaN
    :a:
     C /Normal VALUE
     :a:
      C /Below_Normal VALUE
      masklt
     :a:
      C /Above_Normal VALUE
      masklt
     37.5 masklt
     0 mul
     0 replaceNaN           
     add
    :a:
     C /Above_Normal VALUE
     :a:
      C /Normal VALUE
      masklt
     :a:
      C /Below_Normal VALUE
      masklt
     0 replaceNaN
     add
 :a:
     C /Below_Normal VALUE
     0 mul
     add
    :a:
     C /Normal VALUE
     :a:
      C /Below_Normal VALUE
      masklt
     :a:
      C /Above_Normal VALUE        
      masklt
     37.5 maskgt
     0 mul
     1 add
     0 replaceNaN
     /missing_value 1 def
     add
    :a

startcolormap
DATA -100.0 100.0 RANGEEDGES
null 85 85 200 RGB
85 85 200 RGB -100.0 VALUE
85 85 200 RGB RGBdup -67.5 bandmax
129 124 250 RGB RGBdup -57.5 bandmax
153 163 250 RGB RGBdup -47.5 bandmax
177 202 250 RGB RGBdup -42.5 bandmax
200 240 250 RGB RGBdup -37.5 bandmax
white RGBdup -1.0 bandmax
gray RGBdup 1.0 bandmax
white RGBdup 37.5 bandmax
255 210 210 RGB RGBdup 42.5 bandmax
242 170 170 RGB RGBdup 47.5 bandmax
250 120 120 RGB RGBdup 57.5 bandmax
255 40 40 RGB RGBdup 67.5 bandmax
150 19 19 RGB RGBdup 100.0 bandmax
150 19 19 RGB 100.0 VALUE
150 19 19 RGB
endcolormap
} def 

/T {target_date} def

grid:
/name (T2) def
/units (months since 01-Jan) def
periodic
0.5 1.0 11.5
:grid

variable:
/name /seasabbrev def
grids: T2 :grids
values: (djf) (jfm) (fma) (mam) (amj) (mjj) (jja) (jas) (aso) (son) (ond) (ndj) :values
:variable

 grid:
 /name (L) def
 /units (months) def
 /fullname (Forecast Lead Time in Months) def
 1 1 4
 :grid

:datasetdefs

link:
 /name (Methodology) def
 /description (IRI Seasonal Climate Forecast Methodology) def
 /href (http://iri.columbia.edu/our-expertise/climate/forecasts/seasonal-climate-forecasts/methodology/) def
:link

grid:
/name (X) def
/units (degreeE) def
/fullname (Longitude) def
periodic
0. 1.0 359.0
:grid

grid:
/name (Y) def
/units (degreeN) def
/fullname (Latitude) def
-90.0 1.0 90.0
:grid

grid:
/name (F) def
monthtime
/fullname (Month Forecast Issued) def
/defaultvalue { last } def
/pointwidth 1 def
16 Feb 2017 ensotime
1.0
%16 Mar 2017 ensotime
16 systemtime systemtime2ymd dup 15 lt {
	ymd:lastmonth
}if
ymd2systemtime
(%b %Y) 10 strftime interp ensotime
/netcdfgrid true def
:grid

F {(/Data/data21/iri/FD/NMME_Seasonal_Forecast/Temperature_ELR/forecast_tref_%b[F]%Y[F].nc) [ F ]} removeextrausing
/expires
last_modified systemtime2ymd ymd:nextmonth
pop 14 ymd2systemtime
def
/defaultvalue last def
name exch def
/expires F .expires def
/last_modified F .last_modified def

grid:
/name (L) def
/units (months) def
/fullname (Forecast Lead Time in Months) def
1 1 4
:grid

grid:
/name (C) def
/units (ids) def
/fullname (Tercile Classes) def
values: /Below_Normal /Normal /Above_Normal :values
:grid

/target_date { F L add 1 add /long_name (forecast time) def /bounds undef /pointwidth 3 def /standard_name (time) def } defasvar

/target_season { seasabbrev target_date T2 sample-along } defasvar

/prob {
[ X Y C | L F ] (/Data/data21/iri/FD/NMME_Seasonal_Forecast/Temperature_ELR/forecast_tref_%b[F]%Y[F].nc) [ F ] readdatafile:
/name (prob) def
/units (percent) def
/doublearraytype netcdfrecords :readdatafile
/missing_value NaN def
X -15 10 RANGE
Y 45 65 RANGE
/long_name (Tercile Probability) def
/scale_min 0 def
/scale_max 100 def
tercileclassesscale
} defasvarsilent

/dominant {
prob togetherfn
/long_name (Dominant Tercile Probability) def
C removeGRID
} defasvarsilent

:dataset

prob .X name exch def
prob .Y name exch def

\end{ingrid}

