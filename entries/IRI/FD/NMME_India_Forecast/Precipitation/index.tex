\begin{ingrid}

continuedataset:

/long_name (India Seasonal Precipitation Forecast) def
/description (India NMME Seasonal forecasts for probabilities of below-normal, above-normal, and near-normal precipitation) def

datasetdefs:

/togetherfn {
 a:
    C /Below_Normal VALUE
    :a:
     C /Normal VALUE
     masklt
    :a:
     C /Above_Normal VALUE
     masklt
    -1 mul
    0 replaceNaN
    :a:
     C /Normal VALUE
     :a:
      C /Below_Normal VALUE
      masklt
     :a:
      C /Above_Normal VALUE
      masklt
     34 masklt
     0 mul
     0 replaceNaN           
     add
    :a:
     C /Above_Normal VALUE
     :a:
      C /Normal VALUE
      masklt
     :a:
      C /Below_Normal VALUE
      masklt
     0 replaceNaN
     add
 :a:
     C /Below_Normal VALUE
     0 mul
     add
    :a:
     C /Normal VALUE
     :a:
      C /Below_Normal VALUE
      masklt
     :a:
      C /Above_Normal VALUE        
      masklt
     34 maskgt
     0 mul
     1 add
     0 replaceNaN
     /missing_value 1 def
     add
    :a

startcolormap
DATA -100 100 RANGEEDGES
null 120 50 0 RGB
120 50 0 RGB RGBdup -65 bandmax
170 70 30 RGB RGBdup -55 bandmax
208 128 51 RGB RGBdup -47.5 bandmax
232 184 51 RGB RGBdup -42.5 bandmax
250 250 0 RGB RGBdup -33 bandmax
gray RGBdup
33 bandmax
200 250 200 RGB RGBdup 42.5 bandmax
150 250 150 RGB RGBdup 47.5 bandmax
90 190 100 RGB RGBdup 55 bandmax
0 150 210 RGB RGBdup 65 bandmax
0 51 255 RGB RGBdup 100 bandmax
0 51 255 RGB
endcolormap
} def 

/T {target_date} def

grid:
/name (T2) def
/units (months since 01-Jan) def
periodic
0.5 1.0 11.5
:grid

variable:
/name /seasabbrev def
grids: T2 :grids
values: (djf) (jfm) (fma) (mam) (amj) (mjj) (jja) (jas) (aso) (son) (ond) (ndj) :values
:variable

 grid:
 /name (L) def
 /units (months) def
 /fullname (Forecast Lead Time in Months) def
 1 1 4
 :grid

:datasetdefs

grid:
/name (X) def
/units (degreeE) def
/fullname (Longitude) def
66.5 1.0 100.5
:grid

grid:
/name (Y) def
/units (degreeN) def
/fullname (Latitude) def
6.5 1.0 38.5
:grid

grid:
/name (F) def
monthtime
/fullname (Month Forecast Issued) def
/defaultvalue { last } def
/pointwidth 1 def
16 May 2017 ensotime
1.0
16 Jul 2018 ensotime
/netcdfgrid true def
:grid

grid:
/name (L) def
/units (months) def
/fullname (Forecast Lead Time in Months) def
1 1 4
:grid

grid:
/name (C) def
/units (ids) def
/fullname (Tercile Classes) def
values: /Below_Normal /Normal /Above_Normal :values
:grid

/target_date { F L add 1 add /long_name (forecast time) def /bounds undef /pointwidth 3 def /standard_name (time) def } defasvar

/target_season { seasabbrev target_date T2 sample-along } defasvar

/prob {
[ X Y C | L F ] (/Data/data21/iri/FD/NMME_India_Forecast/forecast_precip_%b[F]%Y[F]smoothed_IMD.nc) [ F ] readdatafile:
/name (prob) def
/units (percent) def
/doublearraytype netcdfrecords :readdatafile
/long_name (Tercile Probability) def
/scale_min 0 def
/scale_max 100 def
tercileclassesscale
} defasvarsilent

/dominant {
prob togetherfn
/long_name (Dominant Tercile Probability) def
C removeGRID
/scale_min -100. def
/scale_max 100. def
} defasvarsilent

:dataset
\end{ingrid}
