\begin{ingrid}
continuedataset:
datasetdefs:
/filenames {
} def
grid:
/name (S)def
/units (months since 1960-01-01)def
/calendar /360 def
/standard_name (forecast_reference_time) def
/pointwidth 0 def
/modulus 12 def
periodic
0 1 11
:grid
/Sper S def
/geos5_model_basics.pptx { (/Data/data1/DataCatalog/entries/Models/NMME/NASA-GMAO/MONTHLY/) /geos5_model_basics.pptx readfilelitin}def
/fileavail
{
prec
   L first VALUE
   dataflag
   [X Y]average
   0 maskle
%  L first VALUE
%  M first VALUE
   [M]average
   grid:
     /name /S1 def
     /units monthtimename def
     /gridtype periodic def
     Jan 1 Dec :grid
%   Apr May maskrange
    grid:
      /name /S2 def
      /units monthtimename def
      /pointwidth 12 def
      1
       Jul 1981 ensotime
       12 1
         Jul (/Data/data23/NMME/NASA_GMAO_062012.D/fileavailendyr.txt) readfile ensotime
%        Jul 2015 ensotime
         :grid
     add
    6.5 sub
    S .last maskgt
    /pointwidth 0 def
    [S]sample-along
/fullname (fileavail) def
} defasvar
:datasetdefs
/ACKNOWLEDGEMENTS (In order to document NMME-Phase II data impact and enable continuing support, users of NMME data are expected to acknowledge NMME data and the participating modeling groups. The NMME model output should be referred to as "the NMME System Phase II data [https://www.earthsystemgrid.org/search.html?Project=NMME]."  In publications, users should include a table (referred to below as Table XX) listing the models and institutions that provided model output used in the NMME-Phase II system, as well as the digital object identifier of publications documenting the models, where "Table XX" in the paper should list the models and modeling groups that provided the NMME data.  In addition, an acknowledgement similar to the following should be included in any publication:  "We acknowledge the agencies that support the NMME-Phase II system, and we thank the climate modeling groups (Environment Canada, NASA, NCAR, NOAA/GFDL, NOAA/NCEP, and University of Miami) for producing and making available their model output. NOAA/NCEP, NOAA/CTB, and NOAA/CPO jointly provided coordinating support and led development of the NMME-Phase II system."  Besides the above acknowledgement, users should register any journal articles (or other scientific documents) that are based on NMME-Phase II results.) def

/IMPORTANT (As of 2 November 2016 an error has been found and corrected in the IRI Data Library archive of the NMME NASA-GMAO-062012 January hindcast and forecast starts.  In the January starts (S grid) for ensemble members (M grid) 1-4 (corresponding to starts associated with dates Dec 12th, Dec 17th, Dec 22nd, and Dec 27th), for all variables, the data in these files were being wrongly associated with the January start of the previoius year.  For example, for the January 2014 start, data should be read from files named using the dates 12 Dec 2013 (ensemble member 1), 17 Dec 2013 (ensemble member 2), 22 Dec 2013 (ensemble member 3), 27 Dec 2013 (ensemble member 4), and 01 Jan 2014 (ensemble members 5-11).  However, continuing with this example, in the Data Library archive, the data from ensemble members 1-4 (dated Dec 12, 17, 22, and 27 2013) were being assigned to the January 2013 start, not the intended January 2014 start.  This means that in forecasts with a January monthly start time, ensemble members 1-4 would have been missing until the following January start, when these ensemble members 1-4 would have been filled with data intended for the next January monthly start, or remained missing in the case of the prec, sst, and tref variables from 2014 to 2016.  This error affected only ensemble members 1-4 of the January starts, but affected all variables and all hindcast and forecast years.  This error was the result of an archiving error in the Data Library, not any error in the original data files from NASA, and has been corrected as of 2 November 2016.  Send any questions to help@iri.columbia.edu .) def

/references (Kirtman_etal2014) def
link:
/name (dataset_documentation) def
/href (geos5_model_basics.pptx) def
:link
link:
/name (data_availability) def
/href (/mark/SOURCES/.Models/.NMME/.NASA-GMAO-062012/.MONTHLY/.fileavail/S2/exch%5BS1%5Dtable:/mark/:table/.html) def
:link
grid:
/name (S)def
/units (months since 1960-01-01)def
/calendar /360 def
/standard_name (forecast_reference_time) def
/pointwidth 0 def
%values:
1 Jan 1981 ensotime
%12. 
1.
1 (/Data/data23/NMME/NASA_GMAO_062012.D/endmonth.txt) readfile ensotime
%1 Feb 2015 ensotime
/defaultvalue { last } def
% {[1 1 1 1 1 2 1 1 1 1]{1 index add}forall}for
%5{dup 1 add}repeat
%:values
:grid

%S
%/expires
%last_modified systemtime2ymd ymd:nextmonth
%ymd2systemtime 7 3600 mul add
%def
%/defaultvalue last def
%name exch def
%/expires S .expires def
/last_modified S .last_modified def

grid:
/name (X)def
/units (degree_east)def
periodic
 0.0 1. 359.
/standard_name (longitude) def
:grid
grid:
/name (Y)def
/units (degree_north)def
 -90. 1. 90.
/standard_name (latitude) def
:grid
grid:
/name (L) def
/units (months) def
/standard_name (forecast_period) def
0.5 1 8.5
:grid
/M 12 NewIntegerGRID
/standard_name (realization) def
 name exch def
variable:
/name /mmdd def
grids: M Sper :grids
values:
0101 0101 0101 0101 0101 0101 0101 0101 0101 0101 0101 0000
0111 0116 0121 0126 0131 0131 0131 0131 0131 0131 0131 0000
0210 0215 0220 0225 0302 0302 0302 0302 0302 0302 0302 0000
0312 0317 0322 0327 0401 0401 0401 0401 0401 0401 0401 0000
0411 0416 0421 0426 0501 0501 0501 0501 0501 0501 0501 0000
0511 0516 0521 0526 0531 0531 0531 0531 0531 0531 0531 0605
0610 0615 0620 0625 0630 0630 0630 0630 0630 0630 0630 0000
0710 0715 0720 0725 0730 0730 0730 0730 0730 0730 0730 0000
0809 0814 0819 0824 0829 0829 0829 0829 0829 0829 0829 0000
0908 0913 0918 0923 0928 1003 1003 1003 1003 1003 1003 0000
1008 1013 1018 1023 1028 1102 1102 1102 1102 1102 1102 0000
1112 1117 1122 1127 1202 1202 1202 1202 1202 1202 1202 0000
:values
:variable
/T { S L add
/standard_name (time) def } defasvarsilent
grid:
/name (Z) def
/units (m) def
/long_name (Height) def
/standard_name (height) def
/netcdfgrid true def
2 :grid

grid:
/name (P) def
/long_name (Pressure Level) def
/standard_name (air_pressure) def
/units (hPa) def
values: 200 :values
:grid 

\end{ingrid}
\begin{ingrid}
/prec{
 [X Y /Z 1 NewIntegerGRID /netcdfgrid true def][M L S] (/Data/data23/NMME/NASA_GMAO_062012.D/%b.D/%Y[S]%4.4d[mmdd]_1x1_precip_ens%2.2d[M].nc) [M S mmdd]readdatafile:
/name (precip) def
 /missing_value 9.99999987E14 def
 /units (kg/m^2/s)cvn def
 /doublearraytype netcdfrecords :readdatafile
/long_name (Total Precipitation) def
/standard_name (lwe_precipitation_rate) def
Z removeGRID
c: 0.001 (m3 kg-1) :c
mul (mm/day) unitconvert
}defasvarsilent

/tref{
 [X Y Z ][M L S] (/Data/data23/NMME/NASA_GMAO_062012.D/%b.D/%Y[S]%4.4d[mmdd]_1x1_tref_ens%2.2d[M].nc) [M S mmdd]readdatafile:
 /name (tref) def
  /missing_value 9.99999987E14 def
  /units /Kelvin_scale def
  /doublearraytype netcdfrecords :readdatafile
 /long_name (Reference Temperature) def
 /standard_name (air_temperature) def
%Z removeGRID
}defasvarsilent

/sst{
 [X Y /Z 1 NewIntegerGRID /netcdfgrid true def][M L S] (/Data/data23/NMME/NASA_GMAO_062012.D/%b.D/%Y[S]%4.4d[mmdd]_1x1_sst_ens%2.2d[M].nc) [M S mmdd]readdatafile:
 /name (sst) def
  /missing_value 9.99999987E14 def
  /units /Kelvin_scale def
  /doublearraytype netcdfrecords :readdatafile
 /long_name (Sea Surface Temperature) def
 /standard_name (sea_surface_temperature) def
 Z removeGRID
 (Celsius_scale)unitconvert
}defasvarsilent

/evap{
[X Y /Z 1 NewIntegerGRID /netcdfgrid true def][M L S]
(/Data/data23/NMME/NASA_GMAO_062012.D/%b.D/%Y[S]%4.4d[mmdd]_1x1_evap_ens%2.2d[M].nc) [M S
mmdd]readdatafile:
 /name (evap) def
 /missing_value 9.99999987E14 def
 /doublearraytype netcdfrecords :readdatafile
 /long_name (Evaporation) def
 Z removeGRID
 /units (W m-2) def
} defasvarsilent

/runoff{
 [X Y /Z 1 NewIntegerGRID /netcdfgrid true def][M L S] (/Data/data23/NMME/NASA_GMAO_062012.D/%b.D/%Y[S]%4.4d[mmdd]_1x1_runoff_ens%2.2d[M].nc)
 [M S mmdd]readdatafile:
 /name (runoff) def
 /missing_value 9.99999987E14 def
 /doublearraytype netcdfrecords :readdatafile
 /long_name (Runoff) def
 /standard_name (runoff_flux) def
 Z removeGRID
 /units (mm/s) def
} defasvarsilent

/t2mmax {
[X Y Z ][M L S]
(/Data/data23/NMME/NASA_GMAO_062012.D/%b.D/%Y[S]%4.4d[mmdd]_1x1_t2mmax_ens%2.2d[M].nc) [M S
mmdd] readdatafile:
 /name (t2mmax) def
 /missing_value 9.99999987E14 def
 /units /Kelvin_scale def
 /doublearraytype netcdfrecords :readdatafile
 /long_name (Maximum Temperature) def
 /standard_name (air_temperature) def
 (Celsius_scale)unitconvert
}defasvarsilent

/t2mmin {
[X Y Z ][M L S]
(/Data/data23/NMME/NASA_GMAO_062012.D/%b.D/%Y[S]%4.4d[mmdd]_1x1_t2mmin_ens%2.2d[M].nc) [M S
mmdd] readdatafile:
 /name (t2mmin) def
 /missing_value 9.99999987E14 def
 /units /Kelvin_scale def
 /doublearraytype netcdfrecords :readdatafile
 /long_name (Minimum Temperature) def
 /standard_name (air_temperature) def
 (Celsius_scale)unitconvert
}defasvarsilent

\end{ingrid}
\begin{ingrid}
:dataset
\end{ingrid}
