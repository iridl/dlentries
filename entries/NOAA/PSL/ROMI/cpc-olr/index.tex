\begin{ingrid}

continuedataset:

datasetdefs:
grid:
/name /micol def
1 1 1
:grid
:datasetdefs


%Time Grid from Real Time Data 
grid:
/name /T def
/standard_name (time) def
/long_name (Real Time ) def
/units (days since 1960-01-01 00:00:00) def
/pointwidth 0 def
01 Jan 1991 julian_day 01 Jan 1960 julian_day sub
1.0
systemtime (%d %b %Y) 12 strftime interp julian_day 01 Jan 1960 julian_day sub 1 sub
/defaultvalue {last} def
:grid

T { (/Data/data1/noaa/indices/romi.cpcolr/romi.cpcolr_%Y[T]-%m[T]-%d[T].txt) [T]  } removeextrausing
 /expires last 10 add 1960 1 1 ymd2rjt add rjt2ymd ymd2systemtime
 17 60 mul 20 add 60 mul add
 def
name exch def
/expires T .expires def
/last_modified T .last_modified def

link:
  /name (website) def
  /description (https://psl.noaa.gov/mjo/mjoindex/)def
  /href (https://psl.noaa.gov/mjo/mjoindex/)def
:link

link:
  /name (data source) def
  /description (Text file of PC1 and PC2 values for 2002 to present. ) def
  /href (https://psl.noaa.gov/mjo/mjoindex/romi.1x.txt) def
:link

 /title (The Real-time OLR MJO Index) def

/history (MJO Indices) def


/PC1 {
 [ micol | T  ]
  (/Data/data1/noaa/indices/romi.cpcolr/romi.cpcolr_%Y[T]-%m[T]-%d[T].txt) [T] 
 readdatafile:
  [ 4 2 ]r*8astsv
 :readdatafile
   micol 1. VALUE
   /units (unitless) def
   /missing_value -999.00 def
   /long_name (PC1 coefficient) def
   std_anomaly_colors
   micol removeGRID

}defasvarsilent

/PC2 {
 [ micol | T  ]
  (/Data/data1/noaa/indices/romi.cpcolr/romi.cpcolr_%Y[T]-%m[T]-%d[T].txt) [T] 
 readdatafile:
  [ 4 3 ]r*8astsv
 :readdatafile
   micol 1. VALUE
   /units (unitless) def
   /missing_value -999.00 def
   /long_name (PC2 coefficient) def
   std_anomaly_colors
   micol removeGRID
}defasvarsilent

/amplitude {
 [ micol | T  ]
  (/Data/data1/noaa/indices/romi.cpcolr/romi.cpcolr_%Y[T]-%m[T]-%d[T].txt) [T] 
 readdatafile:
  [ 4 4 ]r*8astsv
 :readdatafile
   micol 1. VALUE
   /units (unitless) def
   /missing_value -999.00 def
   std_anomaly_colors
   DATA 0 AUTO RANGE
   micol removeGRID
}defasvarsilent

/phase {
 [ micol | T  ]
  (/Data/data1/noaa/indices/romi.cpcolr/romi.cpcolr_%Y[T]-%m[T]-%d[T].txt) [T] 
 readdatafile:
  [ 4 5 ]r*8astsv
 :readdatafile
   micol 1. VALUE
   /units (unitless) def
   /missing_value -999.00 def
   std_anomaly_colors
   DATA 0 AUTO RANGE
   micol removeGRID
}defasvarsilent

:dataset
\end{ingrid}

