\begin{ingrid}
/description (Time bias corrected temperature, precipitation, and drought index data for United States climate divisions from the National Climatic Data Center) def
(/Data/data7/noaa/ncdc/cirs/cirs.cuf) continuewithCUF
%T last rm19602ymd ymd:nextmonth ymd2systemtime /expires exch def pop
%/expires T .expires def
%tmp temp_colors name exch def
pdsi /iridl:hasSemantics (iridl:PalmerDroughtSeverityIndex) def name exch def
continuedataset:
/iridl:hasSemantics (iridl:Climate_Division) def
link:
/name (nClimDiv V1) def
/href (http://iridl.ldeo.columbia.edu/SOURCES/.NOAA/.NCDC/.CIRS/.nClimDiv/.v1/) def
/description (Climate Division is replaced by nClimDiv V1) def
/semantics /dcterm:isReplacedBy def
:link
variable:
/name /divarea def
/long_name (division area) def
/units (miles2) def
grids: IDIV :grids
file:
 formatted
 /name (/Data/data7/noaa/ncdc/cirs/divarea.txt) def
:file
:variable
/stateid {IDIV 100. div toi4 /long_name (state id) def }defasvarsilent
/stateweights {stateid
  {Alabama 2 Arizona 3 Arkansas 4 California 5 Colorado 6 Connecticut 7 Delaware 8 Florida 9 Georgia 10 Idaho 11 Illinois 12 Indiana 
13 Iowa 14 Kansas 15 Kentucky 16 Louisiana 17 Maine 18 Maryland 19 Massachusetts 20 Michigan 21 Minnesota 22 Mississippi 23 Missouri 
24 Montana 25 Nebraska 26 Nevada 27 New_Hampshire 28 New_Jersey 29 New_Mexico 
30 New_York 31 North_Carolina 32 North_Dakota 33 Ohio 34 Oklahoma 35 Oregon
36 Pennsylvania 37 Rhode_Island 38 South_Carolina 39 South_Dakota 40 Tennessee
41 Texas 42 Utah 43 Vermont 44 Virginia 45 Washington 46 West_Virginia
47 Wisconsin 48 Wyoming 
%49 Not_Used 50 Alaska 51 Hawaii 66 Puerto_Rico 67 Virgin_Islands 91 Pacific_Islands
}classify
[IDIV]REORDER
/long_name (state weights) def
divarea mul
} defasvar
/location {
IDIV
%db:
%  /server (localhost) def
%  /dbname (iridb) def
%  :db
IRIDB
  (select the_geom as location,division_i as IDIV from divisions1 where division_i>0 order by division_i) (IDIV) openqueryby
  .location
IDIV 2 index SAMPLE 
IDIV 2 index replaceGRID
nip
} defasvarsilent
:dataset
\end{ingrid}

