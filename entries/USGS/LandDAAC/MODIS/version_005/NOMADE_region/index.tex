\begin{ingrid}
continuedataset:
/iridl:hasSemantics (irigaz:Africa_West_302_0) def
grid:
/name /X def
degE
-10.641777724 0.002115475488 21.284978348
% converts edges to centers
1 index .5 mul sub
3 -1 roll
2 index .5 mul add
3 1 roll
:grid
grid:
/name /Y def
degN
19.999999998 -0.002115475488 -0.001820745
% converts edges to centers
1 index .5 mul sub
3 -1 roll
2 index .5 mul add
3 1 roll
:grid
grid:
/name /T def
/units (days since 2003-01-01) def
\end{ingrid}
file 2004.05.08/MOD13Q1.A2004129.h17v07.004.2004148112503.hdf to  ../modus.2004/MOD13Q1.A2004129.h17v07.004.2004148112503.hdf

file 2004.05.24/MOD13Q1.A2004145.h19v08.004.2004165081004.hdf to  ../modus.2004/MOD13Q1.A2004145.h19v08.004.2004165081004.hdf

Turns out the first number is the first day of the interval, the second date is
not the end of the interval (the interval is 16 days wide).
So I enter the edges grid and take the partial to get the right time grid.
Filenames are generated from the left edge values.
\begin{ingrid}
/pointwidth 0 def
values:
%2003 11 17 ymd2rjt
%2003 1 1 ymd2rjt sub
%16.
%2004 1 1 ymd2rjt 2003 1 1 ymd2rjt sub
%{} for

%2004
2000
1
2000
{
dup  1 1 ymd2rjt 112 add 2003 1 1 ymd2rjt sub
exch
16. exch
1 add 1 1 ymd2rjt 2003 1 1 ymd2rjt sub
{} for
} for
2001
1
2016
{
dup  1 1 ymd2rjt 2003 1 1 ymd2rjt sub
exch
16. exch
1 add 1 1 ymd2rjt 2003 1 1 ymd2rjt sub
{} for
} for

2017
1 1 ymd2rjt 2003 1 1 ymd2rjt sub
16.
2017 3 22 ymd2rjt 2003 1 1 ymd2rjt sub
2 index
     sub
    16 div
    cvi
    16 mul
2 index add
{} for
:values
:grid
/T T
partialgrid
/defaultvalue {last} def
def
/last_modified T .last_modified def
grid:
/name /band def
values: /MIR /NIR /red :values
:grid
/image
{[X Y | band T]
%(/beluga/data/benno/usgs/landdaac/componentimages/A%Y%j[T].250m_16_days_%s[band]_reflectance.dat)
(/Data/data23/usgs/landdaac/componentimages/%Y/A%Y%j[T].250m_16_days_%s[band]_reflectance.dat.gz)
     [band T integralgrid first secondtolast subgrid]
readdatafile:
/missing_value -1000 def
/valid_min 1 def
/valid_max 9999 def
ui*2 :readdatafile
9999.   254 div   1 255 SCALEtoui1
} %defasvarsilent
defasvarcachesilent
:dataset
\end{ingrid}
